{"remainingRequest":"/home/donpiano/running-dinner-solver/node_modules/babel-loader/lib/index.js!/home/donpiano/running-dinner-solver/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/donpiano/running-dinner-solver/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/donpiano/running-dinner-solver/src/components/Locations.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/donpiano/running-dinner-solver/src/components/Locations.vue","mtime":1575235948823},{"path":"/home/donpiano/running-dinner-solver/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgTE1hcCwgTFRpbGVMYXllciwgTE1hcmtlciwgTFRvb2x0aXAsIExJY29uIH0gZnJvbSAidnVlMi1sZWFmbGV0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMb2NhdGlvbnMiLAogIGNvbXBvbmVudHM6IHsKICAgIExNYXA6IExNYXAsCiAgICBMVGlsZUxheWVyOiBMVGlsZUxheWVyLAogICAgTE1hcmtlcjogTE1hcmtlciwKICAgIExUb29sdGlwOiBMVG9vbHRpcCwKICAgIExJY29uOiBMSWNvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGtpdGNoZW5feWVzX2ljb246IHJlcXVpcmUoIi4uL2Fzc2V0cy9raXRjaGVuX3llc19pY29uLnBuZyIpLAogICAgICBraXRjaGVuX21heWJlX2ljb246IHJlcXVpcmUoIi4uL2Fzc2V0cy9raXRjaGVuX21heWJlX2ljb24uc3ZnIiksCiAgICAgIGNzdjogW10sCiAgICAgIGN1cnJlbnRab29tOiAxMywKICAgICAgaGFzTG9jYXRpb25EYXRhOiBmYWxzZSwKICAgICAga8O8Y2hlbk1hcDogewogICAgICAgIEphOiAtMSwKICAgICAgICBOZWluOiAxLAogICAgICAgICJXZW5uIGVzIG5pY2h0IGFuZGVycyBnZWh0IjogMAogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGtpdGNoZW5zOiBmdW5jdGlvbiBraXRjaGVucygpIHsKICAgICAgaWYgKHRoaXMuaGFzTG9jYXRpb25EYXRhKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY3N2LmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgICAgcmV0dXJuIHguaGFzS2l0Y2hlbiAhPSAiTmVpbiIgJiYgeC5sYXQgIT0geC5maXJzdG5hbWUgJiYgeC5sb24gIT0geC5maXJzdG5hbWU7IC8vIHJldHVybiB4LmtpdGNoZW5Vc2VkID09ICJ0cnVlIiB8fCB4LmtpdGNoZW5Vc2VkID09ICJKYSI7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnb1RvV2VsY29tZVBhZ2U6IGZ1bmN0aW9uIGdvVG9XZWxjb21lUGFnZSgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRDdXJyZW50UGFnZSIsICJ3ZWxjb21lIik7CiAgICB9LAogICAgc2VhcmNoTG9jYXRpb246IGZ1bmN0aW9uIHNlYXJjaExvY2F0aW9uKGZpcnN0bmFtZSwgc3RyZWV0LCBzdHJlZXRudW1iZXIsIHppcCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGxvY2F0aW9uID0gc3RyZWV0ICsgIiAiICsgc3RyZWV0bnVtYmVyICsgIiAiICsgemlwOwogICAgICBsb2NhdGlvbiA9IGVuY29kZVVSSShsb2NhdGlvbik7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCJodHRwczovL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/Zm9ybWF0PWpzb24mbGltaXQ9NSZxPSIgKyBsb2NhdGlvbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGFbMF0pOyAvL2VzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICBfdGhpcy5oZWFkZXIgPSByZXNwb25zZS5kYXRhWzBdOwoKICAgICAgICBfdGhpcy5jc3YuZm9yRWFjaChmdW5jdGlvbiAoeCkgewogICAgICAgICAgaWYgKHguZmlyc3RuYW1lID09IGZpcnN0bmFtZSAmJiB4LnN0cmVldCA9PSBzdHJlZXQpIHsKICAgICAgICAgICAgeC5sYXQgPSByZXNwb25zZS5kYXRhWzBdLmxhdDsKICAgICAgICAgICAgeC5sb24gPSByZXNwb25zZS5kYXRhWzBdLmxvbjsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgX3RoaXMuaGFzTG9jYXRpb25EYXRhID0gdHJ1ZTsKCiAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgic2V0Q3N2IiwgX3RoaXMuY3N2KTsKICAgICAgfSk7CiAgICB9LAogICAgYWRkTG9jYXRpb25JbmZvOiBmdW5jdGlvbiBhZGRMb2NhdGlvbkluZm8oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5jc3YuZm9yRWFjaChmdW5jdGlvbiAoeCkgewogICAgICAgIF90aGlzMi5zZWFyY2hMb2NhdGlvbih4LmZpcnN0bmFtZSwgeC5zdHJlZXQsIHguc3RyZWV0bnVtYmVyLCB4LnppcCk7CiAgICAgIH0pOwogICAgfSwKICAgIGV4cG9ydENzdjogZnVuY3Rpb24gZXhwb3J0Q3N2KCkge30KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuY3N2KSB7CiAgICAgIHRoaXMuY3N2ID0gdGhpcy4kc3RvcmUuc3RhdGUuY3N2OwogICAgICB0aGlzLmhhc0xvY2F0aW9uRGF0YSA9IHRoaXMuJHN0b3JlLnN0YXRlLmhhc0xvY2F0aW9uRGF0YTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Locations.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"page\">\n    <h2>Location of People</h2>\n    <p class=\"alert alert-info\">\n      Here, you can add location information to each person. The search uses the free service provided by\n      <a\n        href=\"https://nominatim.openstreetmap.org/\"\n      >nominatim</a>.\n    </p>\n    <p class=\"alert alert-success\" v-if=\"hasLocationData\">\n      You are good to go! Go on and <a href=\"#\" @click=\"$store.commit('setCurrentPage', 'teams')\">select which kitchens are used and create teams!</a>\n    </p>\n    <p v-if=\"csv.length < 2\" class=\"alert alert-warning\">\n      Please provide list of people first\n      <button\n        @click=\"goToWelcomePage\"\n        type=\"button\"\n        class=\"btn btn-primary\"\n      >Go back to the Welcome Page</button>\n    </p>\n    <div class=\"card\" style=\"max-width: 40em; margin: 0 auto;\" v-if=\"csv.length > 2 && !this.hasLocationData\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">Add Locations</h5>\n        <p class=\"card-text\">\n          <button\n            @click=\"addLocationInfo\"\n            type=\"button\"\n            class=\"btn btn-primary\"\n          >Add Location Informaion</button>\n        </p>\n      </div>\n    </div>\n    <div v-if=\"csv.length > 2\" style=\"height: 30em; width: 30em; margin: auto;\">\n      <l-map\n        style=\"height: 100%; width: 100%;margin: 20px;\"\n        :center=\"[49.872517,8.651333]\"\n        :zoom=\"currentZoom\"\n      >\n        <l-tile-layer url=\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\" layer-type=\"base\" />\n        <l-marker\n          v-for=\"kitchen in kitchens\"\n          v-bind:key=\"kitchen.TeamId\"\n          :lat-lng=\"[kitchen.lat, kitchen.lon]\"\n          :title=\"kitchen.firstname\"\n        >\n          <l-icon\n            :icon-size=\"[20, 30]\"\n            :icon-anchor=\"[10, 15]\"\n            :icon-url=\"kitchen.hasKitchen == 'Ja' ? kitchen_yes_icon : kitchen_maybe_icon\"\n          />\n          <l-tooltip :content=\"kitchen.firstname\"></l-tooltip>\n        </l-marker>\n      </l-map>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { LMap, LTileLayer, LMarker, LTooltip, LIcon } from \"vue2-leaflet\";\n\nexport default {\n  name: \"Locations\",\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker,\n    LTooltip,\n    LIcon\n  },\n  data: function() {\n    return {\n      kitchen_yes_icon: require('../assets/kitchen_yes_icon.png'),\n      kitchen_maybe_icon: require('../assets/kitchen_maybe_icon.svg'),\n      csv: [],\n      currentZoom: 13,\n      hasLocationData: false,\n      kÃ¼chenMap: {\n        Ja: -1,\n        Nein: 1,\n        \"Wenn es nicht anders geht\": 0\n      }\n    };\n  },\n  computed: {\n    kitchens: function() {\n      if (this.hasLocationData) {\n        return this.csv.filter(x => {\n          return (\n            x.hasKitchen != \"Nein\" &&\n            x.lat != x.firstname &&\n            x.lon != x.firstname\n          );\n          // return x.kitchenUsed == \"true\" || x.kitchenUsed == \"Ja\";\n        });\n      } else {\n        return [];\n      }\n    }\n  },\n  methods: {\n    goToWelcomePage() {\n      this.$store.commit(\"setCurrentPage\", \"welcome\");\n    },\n    searchLocation(firstname, street, streetnumber, zip) {\n      let location = street + \" \" + streetnumber + \" \" + zip;\n      location = encodeURI(location);\n      this.axios\n        .get(\n          \"https://nominatim.openstreetmap.org/search?format=json&limit=5&q=\" +\n            location\n        )\n        .then(response => {\n          //console.log(response.data[0]); //eslint-disable-line\n          this.header = response.data[0];\n          this.csv.forEach(x => {\n            if (x.firstname == firstname && x.street == street) {\n              x.lat = response.data[0].lat;\n              x.lon = response.data[0].lon;\n            }\n          });\n          this.hasLocationData = true;\n          this.$store.commit(\"setCsv\", this.csv);\n        });\n    },\n    addLocationInfo() {\n      this.csv.forEach(x => {\n        this.searchLocation(x.firstname, x.street, x.streetnumber, x.zip);\n      });\n    },\n    exportCsv() {}\n  },\n  mounted: function() {\n    if (this.$store.state.csv) {\n      this.csv = this.$store.state.csv;\n      this.hasLocationData = this.$store.state.hasLocationData;\n    }\n  }\n};\n</script>\n\n<style>\n</style>\n"],"sourceRoot":"src/components"}]}