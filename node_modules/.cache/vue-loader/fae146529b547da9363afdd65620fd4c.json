{"remainingRequest":"/home/donpiano/running-dinner-solver/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/donpiano/running-dinner-solver/src/components/Assignments.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/donpiano/running-dinner-solver/src/components/Assignments.vue","mtime":1574595200852},{"path":"/home/donpiano/running-dinner-solver/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7TE1hcCwgTFRpbGVMYXllciwgTE1hcmtlciwgTFRvb2x0aXAgfSBmcm9tICd2dWUyLWxlYWZsZXQnOwppbXBvcnQgeyBWdWVDc3ZJbXBvcnQgfSBmcm9tICJ2dWUtY3N2LWltcG9ydCI7CgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBc3NpZ25tZW50cycsCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgTE1hcCwKICAgICAgICBMVGlsZUxheWVyLAogICAgICAgIExNYXJrZXIsCiAgICAgICAgTFRvb2x0aXAsCiAgICAgICAgVnVlQ3N2SW1wb3J0CiAgICB9LAogIGNvbXB1dGVkOiB7CiAgICB1c2VkS2l0Y2hlbnM6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuY3N2LmZpbHRlcih4ID0+IHsKICAgICAgICByZXR1cm4geC5rw7xjaGVCZW51dHp0ID09ICJ0cnVlIgogICAgICAgIH0pCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3NpZ25JZHNUb1RlYW0oKXsKICAgICAgbGV0IGFzc2lnbm1lbnRBcnJheSA9IHRoaXMuY3JlYXRlQXNzaWdubWVudElkcygpCiAgICAgIHRoaXMuY3N2LmZvckVhY2goZSA9PiB7CiAgICAgICAgYXNzaWdubWVudEFycmF5WzBdLmZvckVhY2goa2l0Y2hlblRlYW1zID0+IHsKICAgICAgICAgIGlmIChraXRjaGVuVGVhbXMuaW5jbHVkZXMocGFyc2VJbnQoZS5UZWFtSWQpKSl7CiAgICAgICAgICAgIGUuZmlyc3RDb3Vyc2UgPSBraXRjaGVuVGVhbXNbMF0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS5UZWFtSWQsICIgZWF0cyBhdCAiLCBraXRjaGVuVGVhbXNbMF0sICIgd2l0aCB0ZWFtcyAiLCBraXRjaGVuVGVhbXMpIC8vZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICAgIGFzc2lnbm1lbnRBcnJheVsxXS5mb3JFYWNoKGtpdGNoZW5UZWFtcyA9PiB7CiAgICAgICAgICBpZiAoa2l0Y2hlblRlYW1zLmluY2x1ZGVzKHBhcnNlSW50KGUuVGVhbUlkKSkpewogICAgICAgICAgICBlLnNlY29uZENvdXJzZSA9IGtpdGNoZW5UZWFtc1sxXQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlLlRlYW1JZCwgIiBlYXRzIGF0ICIsIGtpdGNoZW5UZWFtc1swXSwgIiB3aXRoIHRlYW1zICIsIGtpdGNoZW5UZWFtcykgLy9lc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgICAgICB9CiAgICAgICAgfSkKCiAgICAgICAgYXNzaWdubWVudEFycmF5WzJdLmZvckVhY2goa2l0Y2hlblRlYW1zID0+IHsKICAgICAgICAgIGlmIChraXRjaGVuVGVhbXMuaW5jbHVkZXMocGFyc2VJbnQoZS5UZWFtSWQpKSl7CiAgICAgICAgICAgIGUudGhpcmRDb3Vyc2UgPSBraXRjaGVuVGVhbXNbMl0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS5UZWFtSWQsICIgZWF0cyBhdCAiLCBraXRjaGVuVGVhbXNbMF0sICIgd2l0aCB0ZWFtcyAiLCBraXRjaGVuVGVhbXMpIC8vZXNsaW50LWRpc2FibGUtbGluZQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmNzdikgLy9lc2xpbnQtZGlzYWJsZS1saW5lCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0Q3N2IiwgdGhpcy5jc3YpOwogICAgfSwKICAgIGNyZWF0ZUFzc2lnbm1lbnRJZHMoKXsKICAgICAgbGV0IG51bU9mVGVhbXMgPSB0aGlzLmNzdi5sZW5ndGggLyAyCiAgICAgIGNvbnNvbGUubG9nKG51bU9mVGVhbXMpIC8vZXNsaW50LWRpc2FibGUtbGluZQogICAgICBsZXQgbnVtT2ZLaXRjaGVuc0F0T25jZSA9IG51bU9mVGVhbXMgLyAzCgogICAgICAvLyBmaXJzdENvdXJzZQogICAgICBsZXQgZmlyc3RDb3Vyc2UgPSBbXSAvLyB3aWxsIGJlIG9mIHR5cGUgW1tbMTQ3XSwgWzI1OF0sIFszNjldXV1dCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IG51bU9mVGVhbXM7IGkrKyl7CiAgICAgICAgaWYoZmlyc3RDb3Vyc2VbaSAlIG51bU9mS2l0Y2hlbnNBdE9uY2VdKXsKICAgICAgICAgIGZpcnN0Q291cnNlW2kgJSBudW1PZktpdGNoZW5zQXRPbmNlXS5wdXNoKGkpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZpcnN0Q291cnNlW2kgJSBudW1PZktpdGNoZW5zQXRPbmNlXSA9IFtpXQogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gc2Vjb25kQ291cnNlCiAgICAgIGxldCBzZWNvbmRDb3Vyc2UgPSBbXSAvLyB3aWxsIGJlIG9mIHR5cGUgW1tbMTY4XSwgWzI0OV0sIFszNTddXV1dCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IG51bU9mVGVhbXMgLyAzOyBpKyspewogICAgICAgIHNlY29uZENvdXJzZVtpICUgbnVtT2ZLaXRjaGVuc0F0T25jZV0gPSBbaV0KICAgICAgfQogICAgICBmb3IgKGxldCBpID0gbnVtT2ZUZWFtcyAvIDMgKyAxOyBpIDw9IG51bU9mVGVhbXMgLyAzICogMjsgaSsrKXsKICAgICAgICBzZWNvbmRDb3Vyc2VbKGkgKyAxKSUgbnVtT2ZLaXRjaGVuc0F0T25jZV0ucHVzaChpKQogICAgICB9CiAgICAgIGZvciAobGV0IGkgPSBudW1PZlRlYW1zIC8gMyAqIDIgKyAxOyBpIDw9IG51bU9mVGVhbXM7IGkrKyl7CiAgICAgICAgc2Vjb25kQ291cnNlWyhpICsgMiklIG51bU9mS2l0Y2hlbnNBdE9uY2VdLnB1c2goaSkKICAgICAgfQoKICAgICAgLy8gdGhpcmRDb3Vyc2UKICAgICAgbGV0IHRoaXJkQ291cnNlID0gW10gLy8gd2lsbCBiZSBvZiB0eXBlIFtbW1sxNTldLCBbMjY3XSwgWzM0OV1dXQogICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBudW1PZlRlYW1zIC8gMzsgaSsrKXsKICAgICAgICB0aGlyZENvdXJzZVtpICUgbnVtT2ZLaXRjaGVuc0F0T25jZV0gPSBbaV0KICAgICAgfQogICAgICBmb3IgKGxldCBpID0gbnVtT2ZUZWFtcyAvIDMgKyAxOyBpIDw9IG51bU9mVGVhbXMgLyAzICogMjsgaSsrKXsKICAgICAgICB0aGlyZENvdXJzZVsoaSsyKSUgbnVtT2ZLaXRjaGVuc0F0T25jZV0ucHVzaChpKQogICAgICB9CiAgICAgIGZvciAobGV0IGkgPSBudW1PZlRlYW1zIC8gMyoyICsgMTsgaSA8PSBudW1PZlRlYW1zOyBpKyspewogICAgICAgIHRoaXJkQ291cnNlWyhpKzQpJSBudW1PZktpdGNoZW5zQXRPbmNlXS5wdXNoKGkpCiAgICAgIH0KCiAgICAgIGxldCBhbGxNZWFscyA9IFtmaXJzdENvdXJzZSwgc2Vjb25kQ291cnNlLCB0aGlyZENvdXJzZV0KICAgICAgY29uc29sZS5sb2coYWxsTWVhbHMpICAvL2VzbGludC1kaXNhYmxlLWxpbmUKICAgICAgcmV0dXJuIGFsbE1lYWxzCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIGhlYWRlcjogIlRlYW1zIiwKICAgICAgY3VycmVudFpvb206IDEzLAogICAgICBjc3Y6IFsKICAgICAgICB7CiAgICAgICAgICBWb3JuYW1lOiAidGVzdCIsCiAgICAgICAgICBUZWFtSWQ6ICIxIiwKICAgICAgICAgIGxhdDogIjQ5Ljg3MjUxNyIsCiAgICAgICAgICBsb246ICI4LjY1MTMzMyIsCiAgICAgICAgICBrw7xjaGVCZW51dHp0OiAidHJ1ZSIKICAgICAgICB9CiAgICAgIF0sCiAgICAgIC8vbWFwRmllbGRzOiBbJ1Zvcm5hbWUnLCAnVGVhbUlkJ10KICAgICAgLy9tYXBGaWVsZHM6IFsnVm9ybmFtZScsICdUZWFtSWQnLAknbGF0JywJJ2xvbicsICdrw7xjaGVCZW51dHp0J10KICAgICAgbWFwRmllbGRzOiBbJ1Zvcm5hbWUnLAknTmFjaG5hbWUnLAknRS1NYWlsJywJJ1RlbGVmb24nLAknQWx0ZXInLAknU3RyYcOfZScsCSdIYXVzbnVtbWVyJywJJ1BMWicsCSdWaWVydGVsJywJJ09yZ2FuaXNhdGlvbicsCSdLw7xjaGUnLAknQWxsZXJnaWVuJywJJ0FubWVya3VuZ2VuJywJJ0RhdHVtJywgJ1RlYW1JZCcsCSdsYXQnLAknbG9uJywgJ2vDvGNoZUJlbnV0enQnXQogICAgfTsKICB9LAp9Cg=="},{"version":3,"sources":["Assignments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Assignments.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"hello\">\n    <h1>Assignments</h1>\n    <p>Here, the assignments (which teams cook together) are created</p>\n    <vue-csv-import v-if=\"csv.length < 2\" v-model=\"csv\" :map-fields=\"mapFields\"></vue-csv-import>\n\n    <button @click=\"assignIdsToTeam\">Create Team Assignments</button>\n    <l-map\n      v-if=\"csv.length > -2\"\n      style=\"height: 50em; width: 50em\"\n      :center=\"[49.872517,8.651333]\"\n      :zoom=\"currentZoom\"\n    >\n      <l-tile-layer\n        url=\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\"\n        layer-type=\"base\"\n      />\n      <l-marker v-for=\"kitchen in usedKitchens\" v-bind:key=\"kitchen.TeamId\" :lat-lng=\"[kitchen.lat, kitchen.lon]\" :title=\"kitchen.Vorname\">\n        <l-tooltip :content=\"kitchen.Vorname\"></l-tooltip>\n      </l-marker>\n    </l-map>\n    <download-csv\n      v-if=\"csv.length > 2\"\n      :data=\"csv\">\n        <button class=\"btn btn-primary\">Download Data</button>\n    </download-csv>\n  </div>\n</template>\n\n<script>\nimport {LMap, LTileLayer, LMarker, LTooltip } from 'vue2-leaflet';\nimport { VueCsvImport } from \"vue-csv-import\";\n\n\nexport default {\n  name: 'Assignments',\n    components: {\n        LMap,\n        LTileLayer,\n        LMarker,\n        LTooltip,\n        VueCsvImport\n    },\n  computed: {\n    usedKitchens: function () {\n      return this.csv.filter(x => {\n        return x.kücheBenutzt == \"true\"\n        })\n    }\n  },\n  methods: {\n    assignIdsToTeam(){\n      let assignmentArray = this.createAssignmentIds()\n      this.csv.forEach(e => {\n        assignmentArray[0].forEach(kitchenTeams => {\n          if (kitchenTeams.includes(parseInt(e.TeamId))){\n            e.firstCourse = kitchenTeams[0]\n            // console.log(e.TeamId, \" eats at \", kitchenTeams[0], \" with teams \", kitchenTeams) //eslint-disable-line\n          }\n        })\n\n        assignmentArray[1].forEach(kitchenTeams => {\n          if (kitchenTeams.includes(parseInt(e.TeamId))){\n            e.secondCourse = kitchenTeams[1]\n            // console.log(e.TeamId, \" eats at \", kitchenTeams[0], \" with teams \", kitchenTeams) //eslint-disable-line\n          }\n        })\n\n        assignmentArray[2].forEach(kitchenTeams => {\n          if (kitchenTeams.includes(parseInt(e.TeamId))){\n            e.thirdCourse = kitchenTeams[2]\n            // console.log(e.TeamId, \" eats at \", kitchenTeams[0], \" with teams \", kitchenTeams) //eslint-disable-line\n          }\n        })\n      });\n      console.log(this.csv) //eslint-disable-line\n      this.$store.commit(\"setCsv\", this.csv);\n    },\n    createAssignmentIds(){\n      let numOfTeams = this.csv.length / 2\n      console.log(numOfTeams) //eslint-disable-line\n      let numOfKitchensAtOnce = numOfTeams / 3\n\n      // firstCourse\n      let firstCourse = [] // will be of type [[[147], [258], [369]]]]\n      for (let i = 1; i <= numOfTeams; i++){\n        if(firstCourse[i % numOfKitchensAtOnce]){\n          firstCourse[i % numOfKitchensAtOnce].push(i)\n        } else {\n          firstCourse[i % numOfKitchensAtOnce] = [i]\n        }\n      }\n\n      // secondCourse\n      let secondCourse = [] // will be of type [[[168], [249], [357]]]]\n      for (let i = 1; i <= numOfTeams / 3; i++){\n        secondCourse[i % numOfKitchensAtOnce] = [i]\n      }\n      for (let i = numOfTeams / 3 + 1; i <= numOfTeams / 3 * 2; i++){\n        secondCourse[(i + 1)% numOfKitchensAtOnce].push(i)\n      }\n      for (let i = numOfTeams / 3 * 2 + 1; i <= numOfTeams; i++){\n        secondCourse[(i + 2)% numOfKitchensAtOnce].push(i)\n      }\n\n      // thirdCourse\n      let thirdCourse = [] // will be of type [[[[159], [267], [349]]]\n      for (let i = 1; i <= numOfTeams / 3; i++){\n        thirdCourse[i % numOfKitchensAtOnce] = [i]\n      }\n      for (let i = numOfTeams / 3 + 1; i <= numOfTeams / 3 * 2; i++){\n        thirdCourse[(i+2)% numOfKitchensAtOnce].push(i)\n      }\n      for (let i = numOfTeams / 3*2 + 1; i <= numOfTeams; i++){\n        thirdCourse[(i+4)% numOfKitchensAtOnce].push(i)\n      }\n\n      let allMeals = [firstCourse, secondCourse, thirdCourse]\n      console.log(allMeals)  //eslint-disable-line\n      return allMeals\n    }\n  },\n  data: function() {\n    return {\n      header: \"Teams\",\n      currentZoom: 13,\n      csv: [\n        {\n          Vorname: \"test\",\n          TeamId: \"1\",\n          lat: \"49.872517\",\n          lon: \"8.651333\",\n          kücheBenutzt: \"true\"\n        }\n      ],\n      //mapFields: ['Vorname', 'TeamId']\n      //mapFields: ['Vorname', 'TeamId',\t'lat',\t'lon', 'kücheBenutzt']\n      mapFields: ['Vorname',\t'Nachname',\t'E-Mail',\t'Telefon',\t'Alter',\t'Straße',\t'Hausnummer',\t'PLZ',\t'Viertel',\t'Organisation',\t'Küche',\t'Allergien',\t'Anmerkungen',\t'Datum', 'TeamId',\t'lat',\t'lon', 'kücheBenutzt']\n    };\n  },\n}\n</script>\n\n<style scoped>\n</style>\n"]}]}