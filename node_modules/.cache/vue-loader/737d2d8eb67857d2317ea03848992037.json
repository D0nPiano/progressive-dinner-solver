{"remainingRequest":"/home/donpiano/running-dinner-solver/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/donpiano/running-dinner-solver/src/components/Locations.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/donpiano/running-dinner-solver/src/components/Locations.vue","mtime":1574676544888},{"path":"/home/donpiano/running-dinner-solver/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKdGgsCnRkIHsKICB0ZXh0LWFsaWduOiBsZWZ0OwogIHBhZGRpbmc6IDhweDsKfQo="},{"version":3,"sources":["Locations.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA;AACA;AACA;AACA;AACA","file":"Locations.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"page\">\n    <h2>Location of People</h2>\n    <p class=\"alert alert-info\">\n      Here, you can add location information to each person. The search uses the free service provided by\n      <a\n        href=\"https://nominatim.openstreetmap.org/\"\n      >nominatim</a>.\n    </p>\n    <p v-if=\"csv.length < 2\" class=\"alert alert-warning\">\n      Please provide list of people first\n      <button\n        @click=\"goToWelcomePage\"\n        type=\"button\"\n        class=\"btn btn-primary\"\n      >Go back to the Welcome Page</button>\n    </p>\n    <div class=\"card\" style=\"max-width: 40em; margin: 0 auto;\" v-if=\"csv.length > 2 && !this.hasLocationData\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">Add Locations</h5>\n        <p class=\"card-text\">\n          <button\n            @click=\"addLocationInfo\"\n            type=\"button\"\n            class=\"btn btn-primary\"\n          >Add Location Informaion</button>\n        </p>\n      </div>\n    </div>\n    <div v-if=\"csv.length > 2\" style=\"height: 30em; width: 30em; margin: auto;\">\n      <l-map\n        style=\"height: 100%; width: 100%;margin: 20px;\"\n        :center=\"[49.872517,8.651333]\"\n        :zoom=\"currentZoom\"\n      >\n        <l-tile-layer url=\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\" layer-type=\"base\" />\n        <l-marker\n          v-for=\"kitchen in usedKitchens\"\n          v-bind:key=\"kitchen.TeamId\"\n          :lat-lng=\"[kitchen.lat, kitchen.lon]\"\n          :title=\"kitchen.firstname\"\n        >\n          <l-icon\n            :icon-size=\"[20, 30]\"\n            :icon-anchor=\"[10, 30]\"\n            :icon-url=\"kitchen.hasKitchen == 'Ja' ? kitchen_yes_icon : kitchen_maybe_icon\"\n          />\n          <l-tooltip :content=\"kitchen.firstname\"></l-tooltip>\n        </l-marker>\n      </l-map>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { LMap, LTileLayer, LMarker, LTooltip, LIcon } from \"vue2-leaflet\";\n\nexport default {\n  name: \"Locations\",\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker,\n    LTooltip,\n    LIcon\n  },\n  data: function() {\n    return {\n      kitchen_yes_icon: require('../assets/kitchen_yes_icon.png'),\n      kitchen_maybe_icon: require('../assets/kitchen_maybe_icon.png'),\n      csv: [],\n      currentZoom: 13,\n      hasLocationData: false,\n      kÃ¼chenMap: {\n        Ja: -1,\n        Nein: 1,\n        \"Wenn es nicht anders geht\": 0\n      }\n    };\n  },\n  computed: {\n    usedKitchens: function() {\n      if (this.hasLocationData) {\n        return this.csv.filter(x => {\n          return (\n            x.hasKitchen != \"Nein\" &&\n            x.lat != x.firstname &&\n            x.lon != x.firstname\n          );\n          // return x.kitchenUsed == \"true\" || x.kitchenUsed == \"Ja\";\n        });\n      } else {\n        return [];\n      }\n    }\n  },\n  methods: {\n    goToWelcomePage() {\n      this.$store.commit(\"setCurrentPage\", \"welcome\");\n    },\n    searchLocation(firstname, street, streetnumber, zip) {\n      let location = street + \" \" + streetnumber + \" \" + zip;\n      location = encodeURI(location);\n      this.axios\n        .get(\n          \"https://nominatim.openstreetmap.org/search?format=json&limit=5&q=\" +\n            location\n        )\n        .then(response => {\n          console.log(response.data[0]); //eslint-disable-line\n          this.header = response.data[0];\n          this.csv.forEach(x => {\n            if (x.firstname == firstname && x.street == street) {\n              x.lat = response.data[0].lat;\n              x.lon = response.data[0].lon;\n            }\n          });\n          this.hasLocationData = true;\n          this.$store.commit(\"setCsv\", this.csv);\n        });\n    },\n    addLocationInfo() {\n      this.csv.forEach(x => {\n        this.searchLocation(x.firstname, x.street, x.streetnumber, x.zip);\n      });\n    },\n    exportCsv() {}\n  },\n  mounted: function() {\n    if (this.$store.state.csv) {\n      this.csv = this.$store.state.csv;\n      let hasLocationData = false;\n      this.csv.forEach(x => {\n        if (x.lat != x.firstname || x.lon != x.firstname) {\n          hasLocationData = true;\n        }\n      });\n      this.hasLocationData = hasLocationData;\n    }\n  }\n};\n</script>\n\n<style>\nth,\ntd {\n  text-align: left;\n  padding: 8px;\n}\n</style>\n"]}]}