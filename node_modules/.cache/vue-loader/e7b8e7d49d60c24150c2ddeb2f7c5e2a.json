{"remainingRequest":"/home/donpiano/running-dinner-solver/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/donpiano/running-dinner-solver/src/components/Locations.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/donpiano/running-dinner-solver/src/components/Locations.vue","mtime":1575235948823},{"path":"/home/donpiano/running-dinner-solver/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IExNYXAsIExUaWxlTGF5ZXIsIExNYXJrZXIsIExUb29sdGlwLCBMSWNvbiB9IGZyb20gInZ1ZTItbGVhZmxldCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvY2F0aW9ucyIsCiAgY29tcG9uZW50czogewogICAgTE1hcCwKICAgIExUaWxlTGF5ZXIsCiAgICBMTWFya2VyLAogICAgTFRvb2x0aXAsCiAgICBMSWNvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBraXRjaGVuX3llc19pY29uOiByZXF1aXJlKCcuLi9hc3NldHMva2l0Y2hlbl95ZXNfaWNvbi5wbmcnKSwKICAgICAga2l0Y2hlbl9tYXliZV9pY29uOiByZXF1aXJlKCcuLi9hc3NldHMva2l0Y2hlbl9tYXliZV9pY29uLnN2ZycpLAogICAgICBjc3Y6IFtdLAogICAgICBjdXJyZW50Wm9vbTogMTMsCiAgICAgIGhhc0xvY2F0aW9uRGF0YTogZmFsc2UsCiAgICAgIGvDvGNoZW5NYXA6IHsKICAgICAgICBKYTogLTEsCiAgICAgICAgTmVpbjogMSwKICAgICAgICAiV2VubiBlcyBuaWNodCBhbmRlcnMgZ2VodCI6IDAKICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBraXRjaGVuczogZnVuY3Rpb24oKSB7CiAgICAgIGlmICh0aGlzLmhhc0xvY2F0aW9uRGF0YSkgewogICAgICAgIHJldHVybiB0aGlzLmNzdi5maWx0ZXIoeCA9PiB7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB4Lmhhc0tpdGNoZW4gIT0gIk5laW4iICYmCiAgICAgICAgICAgIHgubGF0ICE9IHguZmlyc3RuYW1lICYmCiAgICAgICAgICAgIHgubG9uICE9IHguZmlyc3RuYW1lCiAgICAgICAgICApOwogICAgICAgICAgLy8gcmV0dXJuIHgua2l0Y2hlblVzZWQgPT0gInRydWUiIHx8IHgua2l0Y2hlblVzZWQgPT0gIkphIjsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdvVG9XZWxjb21lUGFnZSgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRDdXJyZW50UGFnZSIsICJ3ZWxjb21lIik7CiAgICB9LAogICAgc2VhcmNoTG9jYXRpb24oZmlyc3RuYW1lLCBzdHJlZXQsIHN0cmVldG51bWJlciwgemlwKSB7CiAgICAgIGxldCBsb2NhdGlvbiA9IHN0cmVldCArICIgIiArIHN0cmVldG51bWJlciArICIgIiArIHppcDsKICAgICAgbG9jYXRpb24gPSBlbmNvZGVVUkkobG9jYXRpb24pOwogICAgICB0aGlzLmF4aW9zCiAgICAgICAgLmdldCgKICAgICAgICAgICJodHRwczovL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/Zm9ybWF0PWpzb24mbGltaXQ9NSZxPSIgKwogICAgICAgICAgICBsb2NhdGlvbgogICAgICAgICkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGFbMF0pOyAvL2VzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICAgIHRoaXMuaGVhZGVyID0gcmVzcG9uc2UuZGF0YVswXTsKICAgICAgICAgIHRoaXMuY3N2LmZvckVhY2goeCA9PiB7CiAgICAgICAgICAgIGlmICh4LmZpcnN0bmFtZSA9PSBmaXJzdG5hbWUgJiYgeC5zdHJlZXQgPT0gc3RyZWV0KSB7CiAgICAgICAgICAgICAgeC5sYXQgPSByZXNwb25zZS5kYXRhWzBdLmxhdDsKICAgICAgICAgICAgICB4LmxvbiA9IHJlc3BvbnNlLmRhdGFbMF0ubG9uOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuaGFzTG9jYXRpb25EYXRhID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0Q3N2IiwgdGhpcy5jc3YpOwogICAgICAgIH0pOwogICAgfSwKICAgIGFkZExvY2F0aW9uSW5mbygpIHsKICAgICAgdGhpcy5jc3YuZm9yRWFjaCh4ID0+IHsKICAgICAgICB0aGlzLnNlYXJjaExvY2F0aW9uKHguZmlyc3RuYW1lLCB4LnN0cmVldCwgeC5zdHJlZXRudW1iZXIsIHguemlwKTsKICAgICAgfSk7CiAgICB9LAogICAgZXhwb3J0Q3N2KCkge30KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmNzdikgewogICAgICB0aGlzLmNzdiA9IHRoaXMuJHN0b3JlLnN0YXRlLmNzdjsKICAgICAgdGhpcy5oYXNMb2NhdGlvbkRhdGEgPSB0aGlzLiRzdG9yZS5zdGF0ZS5oYXNMb2NhdGlvbkRhdGE7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Locations.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Locations.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"page\">\n    <h2>Location of People</h2>\n    <p class=\"alert alert-info\">\n      Here, you can add location information to each person. The search uses the free service provided by\n      <a\n        href=\"https://nominatim.openstreetmap.org/\"\n      >nominatim</a>.\n    </p>\n    <p class=\"alert alert-success\" v-if=\"hasLocationData\">\n      You are good to go! Go on and <a href=\"#\" @click=\"$store.commit('setCurrentPage', 'teams')\">select which kitchens are used and create teams!</a>\n    </p>\n    <p v-if=\"csv.length < 2\" class=\"alert alert-warning\">\n      Please provide list of people first\n      <button\n        @click=\"goToWelcomePage\"\n        type=\"button\"\n        class=\"btn btn-primary\"\n      >Go back to the Welcome Page</button>\n    </p>\n    <div class=\"card\" style=\"max-width: 40em; margin: 0 auto;\" v-if=\"csv.length > 2 && !this.hasLocationData\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">Add Locations</h5>\n        <p class=\"card-text\">\n          <button\n            @click=\"addLocationInfo\"\n            type=\"button\"\n            class=\"btn btn-primary\"\n          >Add Location Informaion</button>\n        </p>\n      </div>\n    </div>\n    <div v-if=\"csv.length > 2\" style=\"height: 30em; width: 30em; margin: auto;\">\n      <l-map\n        style=\"height: 100%; width: 100%;margin: 20px;\"\n        :center=\"[49.872517,8.651333]\"\n        :zoom=\"currentZoom\"\n      >\n        <l-tile-layer url=\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\" layer-type=\"base\" />\n        <l-marker\n          v-for=\"kitchen in kitchens\"\n          v-bind:key=\"kitchen.TeamId\"\n          :lat-lng=\"[kitchen.lat, kitchen.lon]\"\n          :title=\"kitchen.firstname\"\n        >\n          <l-icon\n            :icon-size=\"[20, 30]\"\n            :icon-anchor=\"[10, 15]\"\n            :icon-url=\"kitchen.hasKitchen == 'Ja' ? kitchen_yes_icon : kitchen_maybe_icon\"\n          />\n          <l-tooltip :content=\"kitchen.firstname\"></l-tooltip>\n        </l-marker>\n      </l-map>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { LMap, LTileLayer, LMarker, LTooltip, LIcon } from \"vue2-leaflet\";\n\nexport default {\n  name: \"Locations\",\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker,\n    LTooltip,\n    LIcon\n  },\n  data: function() {\n    return {\n      kitchen_yes_icon: require('../assets/kitchen_yes_icon.png'),\n      kitchen_maybe_icon: require('../assets/kitchen_maybe_icon.svg'),\n      csv: [],\n      currentZoom: 13,\n      hasLocationData: false,\n      kÃ¼chenMap: {\n        Ja: -1,\n        Nein: 1,\n        \"Wenn es nicht anders geht\": 0\n      }\n    };\n  },\n  computed: {\n    kitchens: function() {\n      if (this.hasLocationData) {\n        return this.csv.filter(x => {\n          return (\n            x.hasKitchen != \"Nein\" &&\n            x.lat != x.firstname &&\n            x.lon != x.firstname\n          );\n          // return x.kitchenUsed == \"true\" || x.kitchenUsed == \"Ja\";\n        });\n      } else {\n        return [];\n      }\n    }\n  },\n  methods: {\n    goToWelcomePage() {\n      this.$store.commit(\"setCurrentPage\", \"welcome\");\n    },\n    searchLocation(firstname, street, streetnumber, zip) {\n      let location = street + \" \" + streetnumber + \" \" + zip;\n      location = encodeURI(location);\n      this.axios\n        .get(\n          \"https://nominatim.openstreetmap.org/search?format=json&limit=5&q=\" +\n            location\n        )\n        .then(response => {\n          //console.log(response.data[0]); //eslint-disable-line\n          this.header = response.data[0];\n          this.csv.forEach(x => {\n            if (x.firstname == firstname && x.street == street) {\n              x.lat = response.data[0].lat;\n              x.lon = response.data[0].lon;\n            }\n          });\n          this.hasLocationData = true;\n          this.$store.commit(\"setCsv\", this.csv);\n        });\n    },\n    addLocationInfo() {\n      this.csv.forEach(x => {\n        this.searchLocation(x.firstname, x.street, x.streetnumber, x.zip);\n      });\n    },\n    exportCsv() {}\n  },\n  mounted: function() {\n    if (this.$store.state.csv) {\n      this.csv = this.$store.state.csv;\n      this.hasLocationData = this.$store.state.hasLocationData;\n    }\n  }\n};\n</script>\n\n<style>\n</style>\n"]}]}