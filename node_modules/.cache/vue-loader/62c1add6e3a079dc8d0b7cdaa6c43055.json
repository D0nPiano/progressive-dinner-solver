{"remainingRequest":"/home/donpiano/running-dinner-solver/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/donpiano/running-dinner-solver/src/components/Teams.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/donpiano/running-dinner-solver/src/components/Teams.vue","mtime":1574528804805},{"path":"/home/donpiano/running-dinner-solver/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/donpiano/running-dinner-solver/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFZ1ZUNzdkltcG9ydCB9IGZyb20gInZ1ZS1jc3YtaW1wb3J0IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVGVhbXMiLAogIGNvbXBvbmVudHM6IHsgVnVlQ3N2SW1wb3J0IH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBoZWFkZXI6ICJUZWFtcyIsCiAgICAgIGNzdjogWwogICAgICAgIHsKICAgICAgICAgIFZvcm5hbWU6ICJ0ZXN0IiwKICAgICAgICAgIE5hY2huYW1lOiAidGVzdCIsCiAgICAgICAgICBPcmdhbmlzYXRpb246ICJ0ZXN0IiwKICAgICAgICAgIEvDvGNoZTogInRlc3QiCiAgICAgICAgfQogICAgICBdLAogICAgICBrw7xjaGVuTWFwOiB7CiAgICAgICAgIkphIjogLTEsCiAgICAgICAgIk5laW4iOiAxLAogICAgICAgICJXZW5uIGVzIG5pY2h0IGFuZGVycyBnZWh0IjogMAogICAgICB9LAogICAgICAvL21hcEZpZWxkczogWydWb3JuYW1lJywgJ1N0cmHDn2UnLAknSGF1c251bW1lcicsCSdQTFonLCAnS8O8Y2hlJ10KICAgICAgbWFwRmllbGRzOiBbJ1Zvcm5hbWUnLAknTmFjaG5hbWUnLAknRS1NYWlsJywJJ1RlbGVmb24nLAknQWx0ZXInLAknU3RyYcOfZScsCSdIYXVzbnVtbWVyJywJJ1BMWicsCSdWaWVydGVsJywJJ09yZ2FuaXNhdGlvbicsCSdLw7xjaGUnLAknQWxsZXJnaWVuJywJJ0FubWVya3VuZ2VuJywJJ0RhdHVtJ10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZWFyY2hMb2NhdGlvbih2b3JuYW1lLCBzdHJhc3NlLCBoYXVzbnVtbWVyLCBwbHopIHsKICAgICAgbGV0IGxvY2F0aW9uID0gc3RyYXNzZSArICIgIiArIGhhdXNudW1tZXIgKyAiICIgKyBwbHoKICAgICAgbG9jYXRpb24gPSBlbmNvZGVVUkkobG9jYXRpb24pCiAgICAgIHRoaXMuYXhpb3MKICAgICAgLmdldCgnaHR0cHM6Ly9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoP2Zvcm1hdD1qc29uJmxpbWl0PTUmcT0nICsgbG9jYXRpb24pCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhWzBdKSAvL2VzbGludC1kaXNhYmxlLWxpbmUKICAgICAgICB0aGlzLmhlYWRlciA9IHJlc3BvbnNlLmRhdGFbMF0KICAgICAgICB0aGlzLmNzdi5mb3JFYWNoKHggPT4gewogICAgICAgICAgaWYoeC5Wb3JuYW1lID09IHZvcm5hbWUgJiYgeC5TdHJhw59lID09IHN0cmFzc2UpewogICAgICAgICAgICB4LmxhdCA9IHJlc3BvbnNlLmRhdGFbMF0ubGF0CiAgICAgICAgICAgIHgubG9uID0gcmVzcG9uc2UuZGF0YVswXS5sb24KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0Q3N2IiwgdGhpcy5jc3YpOwogICAgICB9KQogICAgfSwKICAgIG9uU3VibWl0KCkgewogICAgICB0aGlzLm1hcEZpZWxkcy5wdXNoKCdUZWFtSWQnKQogICAgICB0aGlzLm1hcEZpZWxkcy5wdXNoKCdLw7xjaGVCZW51dHp0JykKICAgICAgdGhpcy5jc3Yuc29ydCgoeCwgeSkgPT4gewogICAgICAgICAgcmV0dXJuIHRoaXMua8O8Y2hlbk1hcFt4LkvDvGNoZV0gLSB0aGlzLmvDvGNoZW5NYXBbeS5Lw7xjaGVdOwogICAgICAgIH0KICAgICAgKTsKICAgICAgbGV0IG51bWJlck9mVGVhbXMgPSB0aGlzLmNzdi5sZW5ndGggLyAyCiAgICAgIGxldCBjdXJyZW50VGVhbUlkID0gMQogICAgICBsZXQga8O8Y2hlQmVudXR6dCA9IHRydWUKICAgICAgdGhpcy5jc3YuZm9yRWFjaCh4ID0+IHsKICAgICAgICB0aGlzLnNlYXJjaExvY2F0aW9uKHguVm9ybmFtZSwgeC5TdHJhw59lLCB4LkhhdXNudW1tZXIsIHguUExaKQogICAgICAgIHguVGVhbUlkID0gY3VycmVudFRlYW1JZAogICAgICAgIHguS8O8Y2hlQmVudXR6dCA9IGvDvGNoZUJlbnV0enQgPyAiSmEiIDogIk5laW4iCiAgICAgICAgY3VycmVudFRlYW1JZCArPSAxCiAgICAgICAgaWYgKGN1cnJlbnRUZWFtSWQgPiBudW1iZXJPZlRlYW1zKSB7CiAgICAgICAgICBjdXJyZW50VGVhbUlkID0gMQogICAgICAgICAga8O8Y2hlQmVudXR6dCA9IGZhbHNlCiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRDc3YiLCB0aGlzLmNzdik7CiAgICB9LAogICAgZXhwb3J0Q3N2KCkgewoKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Teams.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Teams.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"hello\">\n    <h1>{{header}}</h1>\n    <p v-if=\"csv.length < 2\">\n      Here, people can be assigned to random teams. But first, you should\n      <b>upload a csv file.</b>\n    </p>\n    <div style=\"max-width: 50em; margin: auto\">\n      <vue-csv-import v-if=\"csv.length < 2\" v-model=\"csv\" :map-fields=\"mapFields\"></vue-csv-import>\n      <button @click=\"onSubmit\" v-else>Create Team IDs</button>\n      <button @click=\"searchLocation\">Add Location Data</button>\n      <download-csv\n        v-if=\"csv.length > 2\"\n        :data=\"csv\">\n         <button class=\"btn btn-primary\">Download Data</button>\n    </download-csv>\n    </div>\n    <div id=\"people\">\n      <v-client-table\n        v-if=\"csv.length > 2\"\n        :data=\"csv\"\n        :columns=\"mapFields\"\n      >\n        <template slot=\"submit\" slot-scope=\"{submit}\">\n          <button @click.prevent=\"submit\">send!</button>\n        </template>\n      </v-client-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { VueCsvImport } from \"vue-csv-import\";\n\nexport default {\n  name: \"Teams\",\n  components: { VueCsvImport },\n  data: function() {\n    return {\n      header: \"Teams\",\n      csv: [\n        {\n          Vorname: \"test\",\n          Nachname: \"test\",\n          Organisation: \"test\",\n          Küche: \"test\"\n        }\n      ],\n      küchenMap: {\n        \"Ja\": -1,\n        \"Nein\": 1,\n        \"Wenn es nicht anders geht\": 0\n      },\n      //mapFields: ['Vorname', 'Straße',\t'Hausnummer',\t'PLZ', 'Küche']\n      mapFields: ['Vorname',\t'Nachname',\t'E-Mail',\t'Telefon',\t'Alter',\t'Straße',\t'Hausnummer',\t'PLZ',\t'Viertel',\t'Organisation',\t'Küche',\t'Allergien',\t'Anmerkungen',\t'Datum']\n    };\n  },\n  methods: {\n    searchLocation(vorname, strasse, hausnummer, plz) {\n      let location = strasse + \" \" + hausnummer + \" \" + plz\n      location = encodeURI(location)\n      this.axios\n      .get('https://nominatim.openstreetmap.org/search?format=json&limit=5&q=' + location)\n      .then(response => {\n        console.log(response.data[0]) //eslint-disable-line\n        this.header = response.data[0]\n        this.csv.forEach(x => {\n          if(x.Vorname == vorname && x.Straße == strasse){\n            x.lat = response.data[0].lat\n            x.lon = response.data[0].lon\n          }\n        })\n        this.$store.commit(\"setCsv\", this.csv);\n      })\n    },\n    onSubmit() {\n      this.mapFields.push('TeamId')\n      this.mapFields.push('KücheBenutzt')\n      this.csv.sort((x, y) => {\n          return this.küchenMap[x.Küche] - this.küchenMap[y.Küche];\n        }\n      );\n      let numberOfTeams = this.csv.length / 2\n      let currentTeamId = 1\n      let kücheBenutzt = true\n      this.csv.forEach(x => {\n        this.searchLocation(x.Vorname, x.Straße, x.Hausnummer, x.PLZ)\n        x.TeamId = currentTeamId\n        x.KücheBenutzt = kücheBenutzt ? \"Ja\" : \"Nein\"\n        currentTeamId += 1\n        if (currentTeamId > numberOfTeams) {\n          currentTeamId = 1\n          kücheBenutzt = false\n        }\n      });\n      this.$store.commit(\"setCsv\", this.csv);\n    },\n    exportCsv() {\n\n    }\n  }\n};\n</script>\n\n<style>\ntable {\n  border-collapse: collapse;\n  width: 100%;\n}\n\nth,\ntd {\n  text-align: left;\n  padding: 8px;\n}\n\ntr:nth-child(even) {\n  background-color: #f2f2f2;\n}\n</style>\n"]}]}